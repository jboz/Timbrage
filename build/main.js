webpackJsonp([3],{105:function(n,t,e){"use strict";e.d(t,"a",function(){return r});var a=e(1),r=(e.n(a),function(){function n(n,t,e){void 0===n&&(n=a().startOf("minute").format()),this.date=n,this._id=t,this._rev=e}return n.prototype.getDate=function(){return new Date(this.date)},n.prototype.getMoment=function(){return a(this.date)},n.prototype.compareTo=function(n){return this.getMoment().diff(n.getMoment())},n.from=function(t,e,r){void 0===e&&(e=a().hour()),void 0===r&&(r=a().minutes());var l=a(t);return l.set("hour",e),l.set("minute",r),new n(l.format())},n}())},161:function(n,t,e){"use strict";e(3),e(0),e(59);var a=e(1),r=e(169),l=e.n(r),o=(e(43),e(105)),i=function(){function n(n,t,e,a){void 0===a&&(a=!1),this.title=n,this.startTimbrage=t,this.endTimbrage=e,this.allDay=a,this.startTime=t?t.getDate():null,this.endTime=e?e.getDate():null}return n.prototype.getMoment=function(){return this.startTimbrage?this.startTimbrage.getMoment():this.endTimbrage.getMoment()},n.prototype.duration=function(){return a.duration(a(this.endTime).diff(a(this.startTime)))},n.fromTimbrages=function(n,t,e){return new this(n,t,e)},n.allDay=function(n,t){var e=new this(n,null,null,!0);return e.startTime=t.startOf("day").add(1,"second").toDate(),e.endTime=t.endOf("day").toDate(),e},n}();e(68),e(50),e(72),e(73),e(69),e(367);e.d(t,"a",function(){return u});var u=function(){function n(n,t,e,r,l,o,i,u){this.calculationService=n,this.storageService=t,this.reporting=e,this.menuCtrl=r,this.calendarCtrl=l,this.toastCtrl=o,this.translate=i,this.loader=u,this.events=[],this.markDisabled=function(n){return a(n).month()>a().month()}}return n.prototype.ionViewWillEnter=function(){this.menuCtrl.enable(!1,"menuTimbrage"),this.menuCtrl.enable(!0,"menuCalendar"),this.loadAllEvents()},n.prototype.reloadDay=function(n){var t=this;void 0===n&&(n=this.calendarCtrl.currentDate),this.updateSumOfDay();var e=a(this.calendarCtrl.currentDate).startOf("day"),r=e.clone().endOf("day");this.storageService.find(e,r).then(function(n){return t.addTimbragesAsEvent(n,e)}).then(function(n){return t.updateSumOfDay(n)}).then(function(){return t.calendar.loadEvents()})},n.prototype.loadAllEvents=function(){var n=this,t=a(this.calendarCtrl.currentDate).startOf("month"),e=t.clone().endOf("month");return this.storageService.find(t,e).then(function(t){if(t&&0!=t.length){var e=l.a.groupBy(t,function(n){return n.getMoment().startOf("day").toISOString()});n.events=new Array;for(var a in e){n.addEvents(e[a])}return n.events}}).then(function(t){return n.updateSumOfDay(),t})},n.prototype.addTimbragesAsEvent=function(n,t){if(void 0===t&&(t=a(this.calendarCtrl.currentDate).startOf("day")),n&&0!=n.length)return l.a.remove(this.events,function(n){return n&&n.getMoment().isSame(t,"day")}),this.addEvents(n)},n.prototype.addEvents=function(n){var t=this,e=this.calculationService.splitPairs(n,!0).map(function(n){return t.toEvent(n)});return this.validateDuration(e),this.events=this.events.concat(e),e},n.prototype.validateDuration=function(n){var t=this;this.calculationService.calculateFromEvents(n).then(function(e){if(e.get("minutes")<0){var r=a(n[0].startTime).format("LL");t.toastCtrl.create({message:t.translate.instant("error.calendar.event.sum.negative",{day:r}),position:"bottom",showCloseButton:!0,closeButtonText:"Ok"}).present()}})},n.prototype.updateSumOfDay=function(n){var t=this;void 0===n&&(n=l.a.filter(this.events,function(n){return n&&n.getMoment().isSame(a(t.calendarCtrl.currentDate),"day")})),this.calculationService.calculateFromEvents(n).then(function(n){return t.sumDay=n})},n.prototype.toEvent=function(n){var t=this.calculationService.diff(n[1],n[0]);return i.fromTimbrages(t.toString().replace("PT",""),n[0],n[1])},n.prototype.onCurrentDateChanged=function(n){this.isSelectedToday=a(n).startOf("day").toString()==a().startOf("day").toString();var t=a(n).month()!=a(this.calendarCtrl.currentDate).month(),e=a(n).day()!=a(this.calendarCtrl.currentDate).day();this.calendarCtrl.currentDate=n,t?this.loadAllEvents():e&&this.reloadDay()},n.prototype.onViewTitleChanged=function(n){this.viewTitle=n},n.prototype.changeMode=function(n){this.calendarCtrl.mode=n},n.prototype.today=function(){this.calendarCtrl.currentDate=new Date,this.reloadDay()},n.prototype.onChangeTime=function(n){var t=this;this.updateSumOfDay(),this.storageService.save(n).then(function(){return t.reloadDay()})},n.prototype.deleteStart=function(n){var t=this;this.storageService.delete(n.startTimbrage).then(function(){return n.startTimbrage=null}).then(function(){null==n.endTimbrage&&null==n.startTimbrage&&l.a.remove(t.events,n)}).then(function(){return t.updateSumOfDay()})},n.prototype.deleteEnd=function(n){var t=this;this.storageService.delete(n.endTimbrage).then(function(){return n.endTimbrage=null}).then(function(){null==n.endTimbrage&&null==n.startTimbrage&&l.a.remove(t.events,n)}).then(function(){return t.updateSumOfDay()})},n.prototype.share=function(){this.reporting.share(this.calendarCtrl.currentDate,this.events,this.exportLink)},n.prototype.addTimbrage=function(){var n=this;this.storageService.save(o.a.from(this.calendarCtrl.currentDate)).then(function(){return n.reloadDay()})},n.prototype.addTimbrages=function(){var n=this,t=[o.a.from(this.calendarCtrl.currentDate,8,0),o.a.from(this.calendarCtrl.currentDate,12,0),o.a.from(this.calendarCtrl.currentDate,13,0),o.a.from(this.calendarCtrl.currentDate,17,0)];this.addTimbragesAsEvent(t),(e=this.storageService).save.apply(e,t).then(function(){return n.reloadDay()});var e},n}()},181:function(n,t){function e(n){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+n+"'.")})}e.keys=function(){return[]},e.resolve=e,n.exports=e,e.id=181},208:function(n,t,e){function a(n){var t=r[n];return t?e.e(t[1]).then(function(){return e(t[0])}):Promise.reject(new Error("Cannot find module '"+n+"'."))}var r={"../pages/calendar/calendar.module.ngfactory":[449,0],"../pages/tabs/tabs.module.ngfactory":[450,2],"../pages/timbrages/timbrages.module.ngfactory":[451,1]};a.keys=function(){return Object.keys(r)},a.id=208,n.exports=a},379:function(n,t,e){"use strict";function a(n){return l._23(0,[(n()(),l._21(-1,null,["\n\n"])),(n()(),l.Z(1,0,null,null,29,"ion-menu",[["enabled","false"],["id","menuTimbrage"],["role","navigation"]],null,null,null,B.b,B.a)),l._17(6144,null,V.a,null,[R.a]),l.Y(3,245760,null,2,R.a,[q.a,l.j,N.a,G.a,l.z,U.a,W.l,X.a,I.a],{content:[0,"content"],id:[1,"id"],enabled:[2,"enabled"]},null),l._19(335544320,1,{menuContent:0}),l._19(335544320,2,{menuNav:0}),(n()(),l._21(-1,0,["\n  "])),(n()(),l.Z(7,0,null,0,11,"ion-header",[],null,null,null,null,null)),l.Y(8,16384,null,0,K.a,[N.a,l.j,l.z,[2,J.a]],null,null),(n()(),l._21(-1,null,["\n    "])),(n()(),l.Z(10,0,null,null,7,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Q.b,Q.a)),l.Y(11,49152,null,0,$.a,[N.a,l.j,l.z],null,null),(n()(),l._21(-1,3,["\n      "])),(n()(),l.Z(13,0,null,3,3,"ion-title",[],null,null,null,nn.b,nn.a)),l.Y(14,49152,null,0,tn.a,[N.a,l.j,l.z,[2,$.a],[2,en.a]],null,null),(n()(),l._21(15,0,["",""])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,3,["\n    "])),(n()(),l._21(-1,null,["\n  "])),(n()(),l._21(-1,0,["\n  "])),(n()(),l.Z(20,0,null,0,9,"ion-footer",[],null,null,null,null,null)),l.Y(21,16384,null,0,ln.a,[N.a,l.j,l.z,[2,J.a]],null,null),(n()(),l._21(-1,null,["\n    "])),(n()(),l.Z(23,0,null,null,5,"button",[["icon-start",""],["ion-button",""],["outline",""]],null,[[null,"click"]],function(n,t,e){var a=!0;if("click"===t){a=!1!==n.component.openGithub()&&a}return a},on.b,on.a)),l.Y(24,1097728,null,0,un.a,[[8,""],N.a,l.j,l.z],{outline:[0,"outline"]},null),(n()(),l._21(-1,0,["\n      "])),(n()(),l.Z(26,0,null,0,1,"ion-icon",[["is-active","false"],["name","ai-code"],["role","img"]],[[2,"hide",null]],null,null,null,null)),l.Y(27,147456,null,0,sn.a,[N.a,l.j,l.z],{name:[0,"name"]},null),(n()(),l._21(-1,0,["\n        Code open sources\n    "])),(n()(),l._21(-1,null,["\n  "])),(n()(),l._21(-1,0,["\n"])),(n()(),l._21(-1,null,["\n\n"])),(n()(),l.Z(32,0,null,null,68,"ion-menu",[["enabled","false"],["id","menuCalendar"],["role","navigation"]],null,null,null,B.b,B.a)),l._17(6144,null,V.a,null,[R.a]),l.Y(34,245760,null,2,R.a,[q.a,l.j,N.a,G.a,l.z,U.a,W.l,X.a,I.a],{content:[0,"content"],id:[1,"id"],enabled:[2,"enabled"]},null),l._19(335544320,3,{menuContent:0}),l._19(335544320,4,{menuNav:0}),(n()(),l._21(-1,0,["\n  "])),(n()(),l.Z(38,0,null,0,11,"ion-header",[],null,null,null,null,null)),l.Y(39,16384,null,0,K.a,[N.a,l.j,l.z,[2,J.a]],null,null),(n()(),l._21(-1,null,["\n    "])),(n()(),l.Z(41,0,null,null,7,"ion-toolbar",[["class","toolbar"]],[[2,"statusbar-padding",null]],null,null,Q.b,Q.a)),l.Y(42,49152,null,0,$.a,[N.a,l.j,l.z],null,null),(n()(),l._21(-1,3,["\n      "])),(n()(),l.Z(44,0,null,3,3,"ion-title",[],null,null,null,nn.b,nn.a)),l.Y(45,49152,null,0,tn.a,[N.a,l.j,l.z,[2,$.a],[2,en.a]],null,null),(n()(),l._21(46,0,["",""])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,3,["\n    "])),(n()(),l._21(-1,null,["\n  "])),(n()(),l._21(-1,0,["\n  "])),(n()(),l.Z(51,0,null,0,48,"ion-content",[],[[2,"statusbar-padding",null],[2,"has-refresher",null]],null,null,cn.b,cn.a)),l.Y(52,4374528,[[3,4]],0,dn.a,[N.a,G.a,X.a,l.j,l.z,I.a,U.a,l.u,[2,J.a],[2,fn.a]],null,null),(n()(),l._21(-1,1,["\n    "])),(n()(),l.Z(54,0,null,1,44,"ion-item-group",[],null,null,null,null,null)),l.Y(55,16384,null,0,hn.a,[],null,null),(n()(),l._21(-1,null,["\n      "])),(n()(),l.Z(57,0,null,null,7,"ion-item-divider",[["class","item item-divider"],["color","light"]],null,null,null,mn.b,mn.a)),l.Y(58,1097728,null,3,_n.a,[pn.a,N.a,l.j,l.z,[2,gn.a]],{color:[0,"color"]},null),l._19(335544320,5,{contentLabel:0}),l._19(603979776,6,{_buttons:1}),l._19(603979776,7,{_icons:1}),l.Y(62,16384,null,0,bn.a,[N.a,l.j,l.z],{color:[0,"color"]},null),(n()(),l._21(63,2,["",""])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,null,["\n      "])),(n()(),l.Z(66,0,null,null,9,"button",[["class","item item-block"],["detail-none",""],["ion-item",""],["menuClose","menuCalendar"]],null,[[null,"click"]],function(n,t,e){var a=!0,r=n.component;if("click"===t){a=!1!==l._11(n,72).close()&&a}if("click"===t){a=!1!==r.changeMode("day")&&a}return a},mn.b,mn.a)),l.Y(67,1097728,null,3,_n.a,[pn.a,N.a,l.j,l.z,[2,gn.a]],null,null),l._19(335544320,8,{contentLabel:0}),l._19(603979776,9,{_buttons:1}),l._19(603979776,10,{_icons:1}),l.Y(71,16384,null,0,vn.a,[],null,null),l.Y(72,16384,null,0,yn.a,[q.a],{menuClose:[0,"menuClose"]},null),(n()(),l._21(-1,2,["\n        "])),(n()(),l._21(74,2,["\n        ","\n      "])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,null,["\n      "])),(n()(),l.Z(77,0,null,null,9,"button",[["class","item item-block"],["detail-none",""],["ion-item",""],["menuClose","menuCalendar"]],null,[[null,"click"]],function(n,t,e){var a=!0,r=n.component;if("click"===t){a=!1!==l._11(n,83).close()&&a}if("click"===t){a=!1!==r.changeMode("week")&&a}return a},mn.b,mn.a)),l.Y(78,1097728,null,3,_n.a,[pn.a,N.a,l.j,l.z,[2,gn.a]],null,null),l._19(335544320,11,{contentLabel:0}),l._19(603979776,12,{_buttons:1}),l._19(603979776,13,{_icons:1}),l.Y(82,16384,null,0,vn.a,[],null,null),l.Y(83,16384,null,0,yn.a,[q.a],{menuClose:[0,"menuClose"]},null),(n()(),l._21(-1,2,["\n          "])),(n()(),l._21(85,2,["\n          ","\n      "])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,null,["\n      "])),(n()(),l.Z(88,0,null,null,9,"button",[["class","item item-block"],["detail-none",""],["ion-item",""],["menuClose","menuCalendar"]],null,[[null,"click"]],function(n,t,e){var a=!0,r=n.component;if("click"===t){a=!1!==l._11(n,94).close()&&a}if("click"===t){a=!1!==r.changeMode("month")&&a}return a},mn.b,mn.a)),l.Y(89,1097728,null,3,_n.a,[pn.a,N.a,l.j,l.z,[2,gn.a]],null,null),l._19(335544320,14,{contentLabel:0}),l._19(603979776,15,{_buttons:1}),l._19(603979776,16,{_icons:1}),l.Y(93,16384,null,0,vn.a,[],null,null),l.Y(94,16384,null,0,yn.a,[q.a],{menuClose:[0,"menuClose"]},null),(n()(),l._21(-1,2,["\n          "])),(n()(),l._21(96,2,["\n          ","\n      "])),l._14(131072,an.a,[rn.a,l.g]),(n()(),l._21(-1,null,["\n    "])),(n()(),l._21(-1,1,["\n  "])),(n()(),l._21(-1,0,["\n"])),(n()(),l._21(-1,null,["\n\n"])),(n()(),l.Z(102,0,null,null,2,"ion-nav",[["swipeBackEnabled","false"]],null,null,null,jn.b,jn.a)),l._17(6144,null,V.a,null,[wn.a]),l.Y(104,4374528,[["content",4]],0,wn.a,[[2,J.a],[2,fn.a],I.a,N.a,G.a,l.j,l.u,l.z,l.i,W.l,kn.a,[2,Dn.a],X.a,l.k],{swipeBackEnabled:[0,"swipeBackEnabled"],root:[1,"root"]},null)],function(n,t){var e=t.component;n(t,3,0,l._11(t,104),"menuTimbrage","false");n(t,24,0,"");n(t,27,0,"ai-code");n(t,34,0,l._11(t,104),"menuCalendar","false");n(t,58,0,"light");n(t,62,0,"light");n(t,72,0,"menuCalendar");n(t,83,0,"menuCalendar");n(t,94,0,"menuCalendar");n(t,104,0,"false",e.rootPage)},function(n,t){n(t,10,0,l._11(t,11)._sbPadding);n(t,15,0,l._22(t,15,0,l._11(t,16).transform("menu.title")));n(t,26,0,l._11(t,27)._hidden);n(t,41,0,l._11(t,42)._sbPadding);n(t,46,0,l._22(t,46,0,l._11(t,47).transform("menu.title")));n(t,51,0,l._11(t,52).statusbarPadding,l._11(t,52)._hasRefresher);n(t,63,0,l._22(t,63,0,l._11(t,64).transform("menu.calendar.views")));n(t,74,0,l._22(t,74,0,l._11(t,75).transform("menu.calendar.views.day")));n(t,85,0,l._22(t,85,0,l._11(t,86).transform("menu.calendar.views.week")));n(t,96,0,l._22(t,96,0,l._11(t,97).transform("menu.calendar.views.month")))})}Object.defineProperty(t,"__esModule",{value:!0});var r=e(38),l=e(0),o=(e(3),e(59),e(106)),i=e(95),u=e(96),s=e(363),c=e(364),d=e(138),f=e(97),h=e(98),m=e(43),_=e(1),p=[{code:"en",name:"English"},{code:"fr",name:"French"}],g="en",b=e(161),v=function(){function n(n,t,e,a,r,l,o){var i=this;this.calendarCtrl=r,this.translate=l,this.inAppBrowser=o,this.rootPage="TabsPage",this.options={location:"yes",hidden:"no",clearcache:"yes",clearsessioncache:"yes",zoom:"yes",hardwareback:"yes",mediaPlaybackRequiresUserAction:"no",shouldPauseOnSuspend:"no",closebuttoncaption:"Close",disallowoverscroll:"no",toolbar:"yes",enableViewportScale:"no",allowInlineMediaPlayback:"no",presentationstyle:"pagesheet",fullscreen:"yes"},this.setLang(g),n.ready().then(function(){if(window.cordova)a.getPreferredLanguage().then(function(n){var t=i.getSuitableLanguage(n.value);i.setLang(t)});else{var n=l.getBrowserLang()||g,r=i.getSuitableLanguage(n);i.setLang(r)}t.styleDefault(),e.hide()})}return n.prototype.changeMode=function(n){this.calendarCtrl.changeMode(n)},n.prototype.setLang=function(n){this.translate.setDefaultLang(n),_.locale(n)},n.prototype.getSuitableLanguage=function(n){return n=n.substring(0,2).toLowerCase(),p.some(function(t){return t.code==n})?n:g},n.prototype.openGithub=function(){this.inAppBrowser.create("https://github.com/jboz/timbrage","_system",this.options)},n}(),y=e(68),j=e(50),w=e(72),k=e(73),D=e(71),C=e(69),S=e(441),T=e(365),M=function(n){return new S.a(n,"./assets/i18n/",".json")},O=function(){return function(){}}(),Y=e(52),z=e(368),E=e(369),P=e(370),L=e(371),Z=e(372),H=e(373),x=e(374),A=e(375),F=e(376),B=e(446),V=e(30),R=e(85),q=e(24),N=e(2),G=e(5),U=e(26),W=e(7),X=e(11),I=e(10),K=e(103),J=e(6),Q=e(447),$=e(37),nn=e(377),tn=e(70),en=e(35),an=e(101),rn=e(28),ln=e(153),on=e(44),un=e(21),sn=e(42),cn=e(378),dn=e(23),fn=e(22),hn=e(125),mn=e(162),_n=e(17),pn=e(15),gn=e(45),bn=e(124),vn=e(62),yn=e(129),jn=e(448),wn=e(57),kn=e(29),Dn=e(16),Cn=e(74),Sn=l.X({encapsulation:2,styles:[],data:{}}),Tn=l.V("ng-component",v,function(n){return l._23(0,[(n()(),l.Z(0,0,null,null,2,"ng-component",[],null,null,null,a,Sn)),l._17(512,null,b.a,b.a,[y.a,j.a,w.a,q.a,k.a,Cn.a,rn.a,C.a]),l.Y(2,49152,null,0,v,[G.a,i.a,u.a,f.a,b.a,rn.a,h.a],null,null)],null,null)},{},{},[]),Mn=e(13),On=e(140),Yn=e(19),zn=e(119),En=e(121),Pn=e(139),Ln=e(34),Zn=e(128),Hn=e(163),xn=e(54),An=e(46),Fn=e(144),Bn=e(60),Vn=e(148),Rn=e(142),qn=e(64),Nn=e(65),Gn=e(67),Un=e(66),Wn=e(100),Xn=e(362),In=e(141),Kn=e(130),Jn=e(143),Qn=l.W(O,[Y.b],function(n){return l._7([l._8(512,l.i,l.S,[[8,[z.a,E.a,P.a,L.a,Z.a,H.a,x.a,A.a,F.a,Tn]],[3,l.i],l.s]),l._8(5120,l.r,l._18,[[3,l.r]]),l._8(4608,Mn.l,Mn.k,[l.r,[2,Mn.u]]),l._8(5120,l.b,l._1,[]),l._8(5120,l.p,l._9,[]),l._8(5120,l.q,l._12,[]),l._8(4608,r.c,r.q,[Mn.c]),l._8(6144,l.D,null,[r.c]),l._8(4608,r.f,On.a,[]),l._8(5120,r.d,function(n,t,e,a,l){return[new r.k(n,t),new r.o(e),new r.n(a,l)]},[Mn.c,l.u,Mn.c,Mn.c,r.f]),l._8(4608,r.e,r.e,[r.d,l.u]),l._8(135680,r.m,r.m,[Mn.c]),l._8(4608,r.l,r.l,[r.e,r.m]),l._8(6144,l.B,null,[r.l]),l._8(6144,r.p,null,[r.m]),l._8(4608,l.G,l.G,[l.u]),l._8(4608,r.h,r.h,[Mn.c]),l._8(4608,r.i,r.i,[Mn.c]),l._8(4608,T.h,T.n,[Mn.c,l.w,T.l]),l._8(4608,T.o,T.o,[T.h,T.m]),l._8(5120,T.a,function(n){return[n]},[T.o]),l._8(4608,T.k,T.k,[]),l._8(6144,T.i,null,[T.k]),l._8(4608,T.g,T.g,[T.i]),l._8(6144,T.b,null,[T.g]),l._8(4608,T.f,T.j,[T.b,l.o]),l._8(4608,T.c,T.c,[T.f]),l._8(4608,Yn.k,Yn.k,[]),l._8(4608,Yn.c,Yn.c,[]),l._8(4608,zn.a,zn.a,[I.a,N.a]),l._8(4608,En.a,En.a,[I.a,N.a]),l._8(4608,Pn.a,Pn.a,[]),l._8(4608,pn.a,pn.a,[]),l._8(4608,Ln.a,Ln.a,[G.a]),l._8(4608,U.a,U.a,[N.a,G.a,l.u,X.a]),l._8(4608,Zn.a,Zn.a,[I.a,N.a]),l._8(5120,Mn.g,Hn.c,[Mn.s,[2,Mn.a],N.a]),l._8(4608,Mn.f,Mn.f,[Mn.g]),l._8(5120,xn.b,xn.d,[I.a,xn.a]),l._8(5120,Dn.a,Dn.b,[I.a,xn.b,Mn.f,An.b,l.i]),l._8(4608,Fn.a,Fn.a,[I.a,N.a,Dn.a]),l._8(4608,Bn.a,Bn.a,[I.a,N.a]),l._8(4608,Vn.a,Vn.a,[I.a,N.a,Dn.a]),l._8(4608,Rn.a,Rn.a,[N.a,G.a,X.a,I.a,W.l]),l._8(4608,Cn.a,Cn.a,[I.a,N.a]),l._8(4608,kn.a,kn.a,[G.a,N.a]),l._8(5120,o.b,o.d,[o.c]),l._8(5120,qn.b,M,[T.c]),l._8(4608,Nn.a,Nn.b,[]),l._8(4608,Gn.b,Gn.a,[]),l._8(4608,Un.b,Un.a,[]),l._8(4608,Wn.a,Wn.a,[]),l._8(4608,rn.a,rn.a,[Wn.a,qn.b,Nn.a,Gn.b,Un.b,rn.b,rn.c]),l._8(4608,i.a,i.a,[]),l._8(4608,u.a,u.a,[]),l._8(4608,s.a,s.a,[]),l._8(4608,c.a,c.a,[]),l._8(4608,d.a,d.a,[]),l._8(4608,f.a,f.a,[]),l._8(4608,h.a,h.a,[]),l._8(4608,D.a,D.a,[]),l._8(4608,j.a,j.a,[o.b]),l._8(4608,y.a,y.a,[D.a,j.a]),l._8(4608,w.a,w.a,[d.a]),l._8(4608,k.a,k.a,[rn.a,D.a]),l._8(4608,C.a,C.a,[Zn.a,rn.a]),l._8(512,Mn.b,Mn.b,[]),l._8(512,l.k,Xn.a,[]),l._8(256,N.b,{},[]),l._8(1024,In.a,In.b,[]),l._8(1024,G.a,G.b,[r.b,In.a,l.u]),l._8(1024,N.a,N.c,[N.b,G.a]),l._8(512,X.a,X.a,[G.a]),l._8(512,q.a,q.a,[]),l._8(512,I.a,I.a,[N.a,G.a,[2,q.a]]),l._8(512,W.l,W.l,[I.a]),l._8(256,xn.a,{links:[{loadChildren:"../pages/calendar/calendar.module.ngfactory#CalendarModuleNgFactory",name:"CalendarPage",segment:"calendar",priority:"low",defaultHistory:[]},{loadChildren:"../pages/tabs/tabs.module.ngfactory#TabsPageModuleNgFactory",name:"TabsPage",segment:"tabs",priority:"low",defaultHistory:[]},{loadChildren:"../pages/timbrages/timbrages.module.ngfactory#TimbragesModuleNgFactory",name:"TimbragesPage",segment:"timbrages",priority:"low",defaultHistory:[]}]},[]),l._8(512,l.h,l.h,[]),l._8(512,Kn.a,Kn.a,[l.h]),l._8(1024,An.b,An.c,[Kn.a,l.o]),l._8(1024,l.c,function(n,t,e,a,l,o,i,u,s,c,d,f,h){return[r.s(n),Jn.a(t),Pn.b(e,a),Rn.b(l,o,i,u,s),An.d(c,d,f,h)]},[[2,l.t],N.a,G.a,X.a,N.a,G.a,X.a,I.a,W.l,N.a,xn.a,An.b,l.u]),l._8(512,l.d,l.d,[[2,l.c]]),l._8(131584,l.f,l.f,[l.u,l.T,l.o,l.k,l.i,l.d]),l._8(512,l.e,l.e,[l.f]),l._8(512,r.a,r.a,[[3,r.a]]),l._8(512,T.e,T.e,[]),l._8(512,T.d,T.d,[]),l._8(512,Yn.j,Yn.j,[]),l._8(512,Yn.d,Yn.d,[]),l._8(512,Yn.i,Yn.i,[]),l._8(512,Hn.a,Hn.a,[]),l._8(512,o.a,o.a,[]),l._8(512,m.a,m.a,[]),l._8(512,O,O,[]),l._8(256,T.l,"XSRF-TOKEN",[]),l._8(256,T.m,"X-XSRF-TOKEN",[]),l._8(256,Y.a,v,[]),l._8(256,Mn.a,"/",[]),l._8(256,o.c,{name:"__timbrageDb",driverOrder:["sqlite","indexeddb","websql"]},[]),l._8(256,rn.c,void 0,[]),l._8(256,rn.b,void 0,[])])});Object(l.M)(),Object(r.j)().bootstrapModuleFactory(Qn)},396:function(n,t,e){function a(n){return e(r(n))}function r(n){var t=l[n];if(!(t+1))throw new Error("Cannot find module '"+n+"'.");return t}var l={"./af":210,"./af.js":210,"./ar":211,"./ar-dz":212,"./ar-dz.js":212,"./ar-kw":213,"./ar-kw.js":213,"./ar-ly":214,"./ar-ly.js":214,"./ar-ma":215,"./ar-ma.js":215,"./ar-sa":216,"./ar-sa.js":216,"./ar-tn":217,"./ar-tn.js":217,"./ar.js":211,"./az":218,"./az.js":218,"./be":219,"./be.js":219,"./bg":220,"./bg.js":220,"./bm":221,"./bm.js":221,"./bn":222,"./bn.js":222,"./bo":223,"./bo.js":223,"./br":224,"./br.js":224,"./bs":225,"./bs.js":225,"./ca":226,"./ca.js":226,"./cs":227,"./cs.js":227,"./cv":228,"./cv.js":228,"./cy":229,"./cy.js":229,"./da":230,"./da.js":230,"./de":231,"./de-at":232,"./de-at.js":232,"./de-ch":233,"./de-ch.js":233,"./de.js":231,"./dv":234,"./dv.js":234,"./el":235,"./el.js":235,"./en-au":236,"./en-au.js":236,"./en-ca":237,"./en-ca.js":237,"./en-gb":238,"./en-gb.js":238,"./en-ie":239,"./en-ie.js":239,"./en-il":240,"./en-il.js":240,"./en-nz":241,"./en-nz.js":241,"./eo":242,"./eo.js":242,"./es":243,"./es-do":244,"./es-do.js":244,"./es-us":245,"./es-us.js":245,"./es.js":243,"./et":246,"./et.js":246,"./eu":247,"./eu.js":247,"./fa":248,"./fa.js":248,"./fi":249,"./fi.js":249,"./fo":250,"./fo.js":250,"./fr":251,"./fr-ca":252,"./fr-ca.js":252,"./fr-ch":253,"./fr-ch.js":253,"./fr.js":251,"./fy":254,"./fy.js":254,"./gd":255,"./gd.js":255,"./gl":256,"./gl.js":256,"./gom-latn":257,"./gom-latn.js":257,"./gu":258,"./gu.js":258,"./he":259,"./he.js":259,"./hi":260,"./hi.js":260,"./hr":261,"./hr.js":261,"./hu":262,"./hu.js":262,"./hy-am":263,"./hy-am.js":263,"./id":264,"./id.js":264,"./is":265,"./is.js":265,"./it":266,"./it.js":266,"./ja":267,"./ja.js":267,"./jv":268,"./jv.js":268,"./ka":269,"./ka.js":269,"./kk":270,"./kk.js":270,"./km":271,"./km.js":271,"./kn":272,"./kn.js":272,"./ko":273,"./ko.js":273,"./ky":274,"./ky.js":274,"./lb":275,"./lb.js":275,"./lo":276,"./lo.js":276,"./lt":277,"./lt.js":277,"./lv":278,"./lv.js":278,"./me":279,"./me.js":279,"./mi":280,"./mi.js":280,"./mk":281,"./mk.js":281,"./ml":282,"./ml.js":282,"./mn":283,"./mn.js":283,"./mr":284,"./mr.js":284,"./ms":285,"./ms-my":286,"./ms-my.js":286,"./ms.js":285,"./mt":287,"./mt.js":287,"./my":288,"./my.js":288,"./nb":289,"./nb.js":289,"./ne":290,"./ne.js":290,"./nl":291,"./nl-be":292,"./nl-be.js":292,"./nl.js":291,"./nn":293,"./nn.js":293,"./pa-in":294,"./pa-in.js":294,"./pl":295,"./pl.js":295,"./pt":296,"./pt-br":297,"./pt-br.js":297,"./pt.js":296,"./ro":298,"./ro.js":298,"./ru":299,"./ru.js":299,"./sd":300,"./sd.js":300,"./se":301,"./se.js":301,"./si":302,"./si.js":302,"./sk":303,"./sk.js":303,"./sl":304,"./sl.js":304,"./sq":305,"./sq.js":305,"./sr":306,"./sr-cyrl":307,"./sr-cyrl.js":307,"./sr.js":306,"./ss":308,"./ss.js":308,"./sv":309,"./sv.js":309,"./sw":310,"./sw.js":310,"./ta":311,"./ta.js":311,"./te":312,"./te.js":312,"./tet":313,"./tet.js":313,"./tg":314,"./tg.js":314,"./th":315,"./th.js":315,"./tl-ph":316,"./tl-ph.js":316,"./tlh":317,"./tlh.js":317,"./tr":318,"./tr.js":318,"./tzl":319,"./tzl.js":319,"./tzm":320,"./tzm-latn":321,"./tzm-latn.js":321,"./tzm.js":320,"./ug-cn":322,"./ug-cn.js":322,"./uk":323,"./uk.js":323,"./ur":324,"./ur.js":324,"./uz":325,"./uz-latn":326,"./uz-latn.js":326,"./uz.js":325,"./vi":327,"./vi.js":327,"./x-pseudo":328,"./x-pseudo.js":328,"./yo":329,"./yo.js":329,"./zh-cn":330,"./zh-cn.js":330,"./zh-hk":331,"./zh-hk.js":331,"./zh-tw":332,"./zh-tw.js":332};a.keys=function(){return Object.keys(l)},a.resolve=r,n.exports=a,a.id=396},50:function(n,t,e){"use strict";e.d(t,"a",function(){return s});e(3);var a=e(1),r=(e.n(a),e(427)),l=e(434),o=e(105),i=this&&this.__awaiter||function(n,t,e,a){return new(e||(e=Promise))(function(r,l){function o(n){try{u(a.next(n))}catch(n){l(n)}}function i(n){try{u(a.throw(n))}catch(n){l(n)}}function u(n){n.done?r(n.value):new e(function(t){t(n.value)}).then(o,i)}u((a=a.apply(n,t||[])).next())})},u=this&&this.__generator||function(n,t){function e(e){return function(o){return function(e){if(a)throw new TypeError("Generator is already executing.");for(;i;)try{if(a=1,r&&(l=r[2&e[0]?"return":e[0]?"throw":"next"])&&!(l=l.call(r,e[1])).done)return l;switch(r=0,l&&(e=[0,l.value]),e[0]){case 0:case 1:l=e;break;case 4:return i.label++,{value:e[1],done:!1};case 5:i.label++,r=e[1],e=[0];continue;case 7:e=i.ops.pop(),i.trys.pop();continue;default:if(l=i.trys,!(l=l.length>0&&l[l.length-1])&&(6===e[0]||2===e[0])){i=0;continue}if(3===e[0]&&(!l||e[1]>l[0]&&e[1]<l[3])){i.label=e[1];break}if(6===e[0]&&i.label<l[1]){i.label=l[1],l=e;break}if(l&&i.label<l[2]){i.label=l[2],i.ops.push(e);break}l[2]&&i.ops.pop(),i.trys.pop();continue}e=t.call(n,i)}catch(n){e=[6,n],r=0}finally{a=l=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,o])}}var a,r,l,o,i={label:0,sent:function(){if(1&l[0])throw l[1];return l[1]},trys:[],ops:[]};return o={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o};r.a.plugin(l.a);var s=function(){function n(n){this.storage=n}return n.prototype.db=function(){var n=this;return new Promise(function(t,e){if(n._db)return t(n._db);console.log("creating database connection...");var a=new r.a("timbrages.db",{adapter:"websql"});n._db=new r.a("timbrages.db",{adapter:"idb"}),console.log("database connection created"),a.replicate.to(n._db).then(function(){return a.destroy(),console.log("database migration done !"),t(n._db)}).catch(e)})},n.prototype.reset=function(){return this._db?this._db.destroy().then(function(){console.log("database cleaned")}):Promise.resolve().then(function(){console.log("no database to clean")})},n.prototype.saveSync=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return i(this,void 0,void 0,function(){var t;return u(this,function(e){switch(e.label){case 0:return[4,this.save.apply(this,n)];case 1:return t=e.sent(),[2,t]}})})},n.prototype.save=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return this.db().then(function(t){n.forEach(function(n){n._id?t.put(n):t.post(n)})}).then(function(){return n})},n.prototype.delete=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];return this.db().then(function(t){n.forEach(function(n){n._id&&t.remove(n)})}).then(function(){return n})},n.prototype.find=function(n,t){var e=this;return void 0===n&&(n=a().startOf("day")),n=n.clone(),t=t?t.clone():n.clone().endOf("day"),this.db().then(function(r){return r.query(function(e,r){var l=a(e.date);l.isSameOrAfter(n)&&l.isBefore(t)&&r(e.date)},{include_docs:!0}).then(function(n){return n.rows.map(function(n){return e.toModel(n.doc)}).filter(function(n){return n})}).then(function(n){return n.sort(function(n,t){return n.compareTo(t)})})})},n.prototype.findAll=function(){var n=this;return this.db().then(function(n){return n.allDocs({include_docs:!0})}).then(function(t){return t.rows.map(function(t){return n.toModel(t.doc)})})},n.prototype.toModel=function(n){return void 0===n?null:new o.a(n.date,n._id,n._rev)},n}()},68:function(n,t,e){"use strict";e.d(t,"a",function(){return l});e(3);var a=e(105),r=e(1),l=(e.n(r),e(71),e(50),function(){function n(n,t){this.settings=n,this.storage=t}return n.prototype.calculateFromEvents=function(n){return Promise.resolve().then(function(){if(!n||0==n.length)return r.duration();var t=r.duration();return n.forEach(function(n){t=t.add(n.duration())}),t})},n.prototype.calculate=function(n){var t=this;return Promise.resolve().then(function(){var e=r.duration();return n&&0!=n.length?(t.splitPairs(n).forEach(function(n){e=e.add(t.diff(n[1],n[0]))}),e):e})},n.prototype.diff=function(n,t){var e=n.getMoment().diff(t.getMoment());return r.duration(e)},n.prototype.splitPairs=function(n,t){void 0===t&&(t=!1);var e=[];if(n)for(var l=function(l){if(void 0!==n[l+1])e.push([n[l],n[l+1]]);else{var i=new a.a,u=r().isSame(n[l].getDate(),"day"),s=r().isAfter(o.settings.getEndOfDay());!t||u&&!s||(i.date=o.settings.applyEndOfDay(r(n[l].date)).startOf("minute").format(),o.settings.get().saveMissings&&o.storage.saveSync(i).then(function(n){return i=n[0]})),e.push([n[l],i])}},o=this,i=0;i<n.length;i+=2)l(i);return e},n}())},69:function(n,t,e){"use strict";e.d(t,"a",function(){return a});e(3),e(59),e(43);var a=function(){function n(n,t){this.loadingCtrl=n,this.translateService=t}return n.prototype.create=function(){return this.loader=this.loadingCtrl.create({content:this.translateService.instant("loading.message")}),this.loader},n.prototype.present=function(){this.loader||this.create().present()},n.prototype.dismiss=function(){this.loader&&this.loader.dismiss(),this.loader=null},n}()},71:function(n,t,e){"use strict";e.d(t,"a",function(){return l});e(3);var a=e(1),r=(e.n(a),function(){return function(){this.endOfDay={hour:18,minute:0,second:0},this.startOfDay={hour:8,minute:0,second:0},this.saveMissings=!0}}()),l=function(){function n(){this.settings=new r}return n.prototype.get=function(){return this.settings},n.prototype.getEndOfDay=function(){return this.applyEndOfDay()},n.prototype.applyEndOfDay=function(n){return void 0===n&&(n=a()),n.hour(this.settings.endOfDay.hour),n.minute(this.settings.endOfDay.minute),n.second(this.settings.endOfDay.second),n},n}()},72:function(n,t,e){"use strict";e.d(t,"a",function(){return o});e(3),e(138);var a=e(1),r=(e.n(a),e(169)),l=e.n(r),o=function(){function n(n){this.fileSystem=n}return t=n,n.prototype.share=function(n,t,e){var r=a(n).format("YYYY-MM"),l=this.createCsvReport(t),o=new Blob([l],{type:"text/csv;charset=utf-8;"}),i=URL.createObjectURL(o),u=e.nativeElement;u.href=i,u.download=r+".csv",u.click(),window.URL.revokeObjectURL(i)},n.prototype.createFile=function(n,t){var e=this;return this.fileSystem.writeFile(this.fileSystem.dataDirectory,n,t,{replace:!0}).then(function(){return e.fileSystem.dataDirectory+"/"+n})},n.prototype.createCsvReport=function(n){var e=[];return e.push("timbrages"),n.forEach(function(n){e.push(t.format(n.startTimbrage.getMoment())),e.push(t.format(n.endTimbrage.getMoment()))}),l.a.join(e,"\r\n")},n.format=function(n){return n.format("YYYY-MM-DD HH:mm")},n;var t}()},73:function(n,t,e){"use strict";e.d(t,"a",function(){return r});e(3);var a=e(1),r=(e.n(a),e(43),e(71),function(){function n(n,t){this.translateService=n,this.mode="month",this.currentDate=new Date,this.startHour=7,this.startHour=t.get().startOfDay.hour}return Object.defineProperty(n.prototype,"dateFormatter",{get:function(){var n=this.translateService.instant("page.calendar.week");return{formatMonthViewDay:function(n){return n.getDate().toString()},formatMonthViewDayHeader:function(n){return a(n).format("ddd")},formatMonthViewTitle:function(n){return a(n).format("MMM YYYY")},formatWeekViewDayHeader:function(n){return a(n).format("ddd DD")},formatWeekViewTitle:function(t){return a(t).format("MMM YYYY, ["+n+"] ww")},formatWeekViewHourColumn:function(n){return a(n).format("HH [h]")},formatDayViewHourColumn:function(n){return a(n).format("HH [h]")},formatDayViewTitle:function(n){return a(n).format("ddd DD MMM YY")}}},enumerable:!0,configurable:!0}),n}())}},[379]);